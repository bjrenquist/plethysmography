DATA ANALYSIS SOFTWARE
======================
This directory contains the software used to analyze data collected with the plethysmography system. The software was written using Python and is able to load RCALV datafiles generated by the data collection software. 

Briefly, it allows for automated or manual calibration from a voltage (pressure) signal to a chamber volume signal based on a set of calibration injections performed during data collection. It then computes the flow signal within the chamber. With complete volume and flow signals, the software can identify all individual breaths from the trace, while removing outliers including signal saturation and mouse movements. Important landmarks and breath characteristics are determined for each breath and reported along with 1-minute average statistics. This data is saved to an Excel file with a filename matching that of the collection datafile, along with an "analysis" tag.

Installation Instructions for Windows
-------------------------------------
1. Download the latest version of Python 3 from http://www.python.org (Python 3.10.1 as of 12/20/2021) and install it. Make sure to select the box to "Add Python to PATH" during the installation process to make it easier for your computer to locate the installed program. Once the installation finishes, there should be a "Setup was successful" confirmation window. You can ignore the option to "Disable path length limit."

2. Download the plethysmography project files from this github page (https://github.com/bjrenquist/plethysmography) by clicking the green "Code" button and selecting "Download ZIP". Right click and "Extract All" to unzip the downloaded folder and move it to the location of your choice (i.e. Desktop, Documents, etc.). Open this folder and navigate to the subfolder "plethysmography-main\data_analysis\respiratory_analysis_v1_5", which contains four Python (.py) files. Create a shortcut to the "respiration_analysis_v1-5.py" file and place the shortcut on your Desktop for quick access.

3. Install the Python modules that are required to run the respiration_analysis software. This step can be intimidating, but if you are careful and double check spelling at each step, it should go smoothly.

	a. Click on the Windows Start Menu icon and start typing "Command Prompt". Right click the option with the same name that Windows suggests, and select "Run as administrator". Allow changes to this system when the warning dialog appears.

	b. Check if Python is setup correctly. Type the following into the prompt and hit Enter:
		
		python --version

	  The current version of Python should be displayed if all is well (i.e. Python 3.10.1).

	c. Update Python's built-in module installer, pip. Enter the following at the command prompt:

		python -m pip install -U pip

	  This will update pip to the latest version available.

	d. Install the following modules by entering the following lines one at a time:

		pip install openpyxl

		pip install lxml

		pip install numpy

		pip install scipy

		pip install matplotlib

	  You should see a confirmation that each module was successfully installed.

4. Now that all the required modules are installed, you should be able to run the respiration_analysis
   program using the shortcut that you created in step 2. When you run it, two windows should open: a
   black Windows terminal and the Respiration Analysis window with Voltage and Pressure graphs. The
   Windows terminal can be largely ignored. If you run into a software bug during analysis, an error
   should be displayed in this window (useful for troubleshooting).


Installation Instructions for Mac OS X
--------------------------------------

1. Download the latest version of Python 3 from http://www.python.org (Python 3.10.1 as of 12/20/2021)
   and install it. The default install settings should be sufficient.

2. Download the plethysmography project files from this github page (https://github.com/bjrenquist/plethysmography) by clicking the green "Code" button and selecting "Download ZIP". Double click the zipped folder and it will automatically unzip/decrompress. Move the unzipped folder to the location of your choice (i.e. Desktop, Documents, etc.). Open this folder and navigate to the subfolder "plethysmography-main/data_analysis/respiratory_analysis_v1_5", which contains four Python (.py) files.

3. Install the Python modules that are required to run the respiration_analysis software. This step can
   be intimidating, but if you are careful and double check spelling at each step, it should go smoothly.

	a. In the Finder, open the /Applications/Utilities folder and run Terminal.

	b. Check if Python is setup correctly. Type the following into the prompt and hit Return:
		
		python3 --version

	  The current version of Python should be displayed if all is well (i.e. Python 3.10.1).

	c. Update Python's built-in module installer, pip3. Enter the following at the command prompt:

		pip3 install --upgrade pip

	  This will update pip3 to the latest version available.

	d. Install the following modules by entering the following lines one at a time:

		pip3 install openpyxl

		pip3 install lxml

		pip3 install numpy

		pip3 install scipy

		pip3 install matplotlib

	  You should see a confirmation that each module was successfully installed.

4. Now that all the required modules are installed, you should be able to run the respiration_analysis
   program. To do this, create a small text file with a one-line Terminal command that you can
   copy and paste into the Terminal window. You will need to figure out the exact filepath to the
   "respiratory_analysis_v1_5.py" file. The easiest way to do this is to have the Terminal window and the
   unzipped folder from step 2 opened side-by-side. If you drag the file into the Terminal window, it will
   show the full filepath. It should look similar to this:
       
        /Users/Username/Desktop/plethysmography-main/data_analysis/respiratory_analysis_v1_5/respiratory_analysis_v1_5.py

   Open a text editor and copy/paste this filepath onto the first line. Now, add "python3 " (with a space)
   before the filename so the line looks like this:
        
        python3 /Users/Username/Desktop/plethysmography-main/data_analysis/respiratory_analysis_v1_5/respiratory_analysis_v1_5.py

   Save the text file and put it on your Desktop for convenience. To run the analysis software, you will
   open a Terminal window, open this text file, copy/paste the whole line into the Terminal window, then 
   press Return. 

   Two windows should open: a blank terminal and the Respiration Analysis window with Voltage and Pressure 
   graphs. The terminal can be largely ignored. If you run into a software bug during analysis, an error
   should be displayed in this window (screenshots of this are useful for fixing the bug).
   
   Operation
   ---------
   
